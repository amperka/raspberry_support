<!doctype html>
<html>
	<head>
		<title>LED remote control</title>
		<meta charset="utf-8" />
		<style>
		.head {
			width: 50%;
			margin: 0 auto;
			text-align: center;
		}
		.content {
			width: 50%;
			margin: 10% auto;
			text-align: center;
			font-size: 40px;
		}
		.button {
			margin: 20px;
			width: 200px;
			height: 100px;
			border: solid 5px;
			border-radius: 30px;
			line-height: 40px;
			font-size: 25px;
			text-align: center;
		}
		#output {
			text-align: center;
			font-size: 20px;
			color: #AAA;
		}
		</style>
		<script>
		var button;
		var output;
		var on = true;
		window.onload = function () {
			button = document.getElementById('button');
			output = document.getElementById('output');
			button.style.backgroundColor = '#CFD0D0';
			button.style.borderColor = '#F1F1F1';
			output.innerHTML = '&nbsp;';	
		}
		var send = function(){
			var xhr = new XMLHttpRequest();
			
			output.innerHTML = 'In progress…';
			
			if (on === true) {
				xhr.open('GET', 'turnOn', true);
			} else {
				xhr.open('GET', 'turnOff', true);
			}
			
			xhr.onreadystatechange = function() {
				console.log(xhr.readyState, xhr.response);
				if (xhr.readyState === 4) {
					if (xhr.response === '') {
						output.innerHTML = 'No connection to the server';
					} else {
						output.innerHTML = '&nbsp;';					
						if (on === true) {
							button.innerHTML = 'Turn off';
							button.style.backgroundColor = '#FF0';
							button.style.borderColor = '#CC0';
						} else {
							button.innerHTML = 'Turn on';
							button.style.backgroundColor = '#CFD0D0';
							button.style.borderColor = '#F1F1F1';
						}
						on = !on;
					}
				}
			}

			xhr.send();
		}
		</script>
	</head>
	<body>
		<div class="head">
			<h1>LED remote control</h1>
			<img src="/images/logo.png" alt="Image is missing :(">
			<br>
			Powered Raspberry Pi
		</div>
		<div class="content">
			<button class="button" onclick="send()" id="button">Turn on</button>
			<div id="output">Loading…</div>
		</div>
	</body>
</html>
